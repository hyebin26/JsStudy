# 웹 브라우저는 어떻게 작동하는가?

웹 브라우저는 동기적으로 HTML, CSS, JS언어를 해석하여 내용을 화면에 보여주는 응용 소프트웨어입니다.

### 렌더링 엔진

렌더링엔진은 HTML, XML, 이미지 등 요청받은 내용을 브라우저 화면에 표시하는 엔진입니다. 각 브라우저마다 렌더링 엔진이 다르기 때문에 다르게 보이는 경우가 있습니다. ex) Blink, Webkit

렌더링 엔진은 좀 더 나은 사용자 경험을 위해 가능하면 빠르게 내용을 표시합니다. 그래서 일련의 과정들이 동기적으로 진행되지 않습니다. HTML을 파싱 할 때까지 기다리지 않고 렌더트리 배치와 그리기 과정을 시작합니다.


### 렌더링 엔진 동작 과정

렌더링 엔진은 서버로부터 응답받은 HTML문서를 얻는 것으로 시작합니다.

1. HTML파서를  통하여 HTML을 파싱(parsing)하고 파싱 트리(DOM)를 생성합니다.
2. CSS파서를 통하여 CSS파일을 파싱하고 파싱 트리(CSSOM)를 생성합니다.
3. DOM과 CSSOM을 기반으로 문서를 시각적인 구성요소로 만들어주는 렌더트리를 생성합니다.
4. 렌더 트리를 배치합니다(Layout, reflow)
5. 렌더 트리를 그립니다.

## 자바스크립트는 ?

지금까지 렌더링엔진에서 HTML,CSS파일을 파싱하는 과정을 알아봤습니다.

Javascript는 렌더링 엔진이 처리하는 것이 아니라 자바스크립트 엔진이 처리합니다. HTML파서는 script태그를 만나면 Javascript코드를 해석하기 위해 자바스크립트 엔진에게 권한을 넘깁니다. 권한을 받은 자바스크립트 엔진은 자바스크립트 파일을 로드하고 파싱하여 실행합니다. 

자바스크립트의 실행이 완료되면 다시 HTML파서로 제어 권한을 넘기고 중지했던 시점으로 돌아가 DOM생성을 재개합니다. 만약 Javascript코드가 완성되지 않은 DOM을 조작하게 된다면 에러가 발생할 것입니다.

⇒ 이것이 HTML파일에서 Javascript코드를 body태그 하단에 위치시키는 이유입니다.

## 참고

[https://bbangson.tistory.com/87](https://bbangson.tistory.com/87)
