# 제어의 역전

### Inversion of Control(제어의 역전)

제어의 역전은 용어 그대로 코드의 로직이 일반적인 제어 흐름이 아니라 역전된 것을 의미한다. 제어의 역전에서는 

1. 오브젝트가 자신이 사용 할 오브젝트를 스스로 선택하지 않고 생성하지도 않는다.
2. 자신이 어떻게 만들어지고 어디서 쓰이는지는 전혀 알 수 없다.

대표적으로 프레임워크가 제어의 역전 개념이 적용된 대표적인 기술이다.

라이브러리를 사용하는 앱코드는 앱의 흐름을 직접 제어한다. 하지만 프레임워큰느 거꾸로 앱 코드가 프레임워크에 의해 사용된다. 즉, 프레임워크가 흐름을 주도하는 중에 개발자가 만든 앱의 코드를 사용하게 만드는 방식이다. 앱의 코드는 프레임워크가 짜놓은 틀에서 수동적으로 동작해야 한다.

### Dependency Injection(의존성 주입)

의존성을 자신이 아닌 외부에서 주입하는 개념이다. IoC라는 개념이 너무 추상적이라 핵심을 짚는 용어가 필요했는데 이 때 나온용어가 의존성 주입이다.

```jsx
class Player{
	constructor(){
	  this.weapon = new Weapon(); // new Whip();
	}
  attack(){
	  this.weapon.attack();
	}
}
```

위의 예제를 보면 `Player`가  `Weapon` 에 의존하고 있다. 만약에 `Weapon` 을 `Whip` 이라는 `Weapon` 을 상속하고 있는 객체로 변경하고 싶다면 `Weapon` 을 의존하고 있는 `Player` 내부함수를 수정해야 한다. 하지만 `Weapon`을 의존하고 있는 객체가 100개라면 100개의 코드를 읽고 내부를 수정해야 한다. 반면에 의존성을 분리하면,

```jsx
class Player{
	constructor(weapon){
	  this.weapon = weapon;
	}
  attack(){
	  this.weapon.attack();
	}
}

const me = new Player(new Whip());
```

위의 코드는 의존성이 분리되어 있어 의존성이 변경되어도 내부 로직을 별도로 수정할 필요가 없다. 즉, 의존성을 사용하게 되는 `Player` 쪽에서 결정하게 되는 관계가 역전된 모습을 확인할 수 있다. 이를 **의존성 주입, 의존 관계의 역전**이라고 한다.

### IOC의 장점은?

1. 테스트 코드 작성에 용이하다.
2. 유지보수 비용을 줄일 수 있다.
3. 구현이 좀 더 단순해진다.

### 참고

[https://darrengwon.tistory.com/1363](https://darrengwon.tistory.com/1363)
