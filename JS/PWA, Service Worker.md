# PWA

## PWA(Progressive Web Application)

  PWA는 웹앱으로 크로스 플랫폼에서 동작하는 웹어플리케이션을 만들 수 있습니다. 네이티브에서 동작하는 앱의 경우 안드로이드나 아이폰처럼 특정한 플랫폼에서 동작하는 네이티브 앱의 경우 플랫폼에서 제공하는 다양한 API를 통해서 다양한 기능을 할 수 있으나, 플랫폼에 의존적이라는 단점이 있습니다. 하지만 웹앱의 경우 쉽게 접근할 수 있지만 플랫폼 자체의 API를 사용할 수 없다는 단점이 있습니다. 틱톡, 스타벅스, 우버 등등에서 PWA를 사용하고 있습니다.

 PWA의 단점은 새롭게 추가되는 브라우저 API의 경우 예전 브라우저에서 사용할 수 없고 파이어폭스는 데스크탑 브라우저에서는 IOS에서는 PWA를 적용할 수 없고 앱스토어에서는 수익관련 문제로 사용할 수 없지만 사파리를 통해서 설치할 수 있습니다. 그리고 네이티브 앱처럼 모든 플랫폼 API를 사용할 수 없어서 완전히 API처럼 만들 수 없어서 제약사항이 있습니다.

### 크로스 플랫폼으로 사용할 만한가?

1. Service Workers를 사용한 캐싱으로 앱을 설치한 후에 로딩시간이 줄어들어 소중한 데이터와 시간을 절약
2. 앱 업데이트가 있을 때 변경된 컨텐츠만 업데이트 할 수 있음. 반면에 네이티브 앱의 경우, 아주 작은 수정에도 사용자가 어플리케이션 전체를 다시 다운로드하도록 강제함.
3. 시스템 알림 및 푸시 메시지를 통한 사용자의 재참여, 참여울이 높은 사용자와 더 나은 전환율을 이끌어냄.

PWA라우트를 시도하여 네이티브 앱보다 더 향상된 웹사이트 경험을 제공한 사이트들도 많습니다. 

### 서비스워커

서비스 워커는 출처와 경로에 대해 등록하는 이벤트 기반 워커로서 Javascript파일의 형태를 갖고 있습니다. 서비스 워커는 연관된 웹 페이지/사이트를 통제하여 탐색과 리소스 요청을 가로채 수정하고, 리소스를 굉장히 세부적으로 캐싱할 수 있습니다. 즉, 서비스워커는 브라우저의 백그라운드에서 실행하는 스크립트입니다. 그러므로 웹 페이지와 별개로 생명주기를 갖고 동작합니다.

서비스 워커는 워커 맥락에서 실행되기 때문에 DOM에 접근할 수 없습니다. 또한 앱을 구동하는 주 Javascript와는 다른 스레드에서 동작하므로 연산을 가로막지는 않습니다. 서비스워커는 온전히 비동기적으로 설계되었으며 그로 인해 동기적 XHR, 웹스토리지등의 API를 서비스 워커 내에서 사용할 수 없습니다. 서비스워커는 중간에 네트워크 수정을 할 수 있다는 점에서 공격에 취약해서 오로지 HTTPS에서만 사용가능합니다.

서비스 워커를 사용하면 먼저 캐싱된 리소스를 사용하도록 앱을 설정해서 오프라인일 경우에도 일관적인 경험을 제공한다음 네트워크 연결이 돌아올 때 더 많은 데이터를 불러오게 할 수 있습니다. 이 기능은 네이티브 앱에서 사용되는 구현법으로, 네이티브 앱이 웹 앱 대신 선택되는 주된 이유 중에 하나입니다.

주로 사용되는 예는 밑의 항목들이 있습니다.

1. 백그라운드 데이터 동기화
2. 성능 향상. 사진 앨범의 다음 사진 몇 장처럼, 사용자가 필요로 할 것으로 생각되는 리소스의 프리패칭 등.
3. 위치정보, 자이로 센서 등 계산에 높은 비용이 들어가는 다수의 페이지에서 함께 사용할 수 있도록 데이터 업데이트를 중앙화.
4. 특정 URL 패턴에 기반한 사용자 지정 템플릿 제공

참고: https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API/Using_Service_Workers
https://www.youtube.com/watch?v=FEBkne7Nyu4
